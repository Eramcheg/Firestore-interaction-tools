import firebase_admin
from firebase_admin import credentials, firestore
from datetime import datetime
import json
cred = credentials.Certificate("G:\\FIles\\firebase\\key2.json")
firebase_admin.initialize_app(cred)
collection_ref = firestore.client().collection("item")

images = {'11022 001': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/11022%20001.jpg', '11022 209': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/11022%20209.jpg', '11022 214': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/11022%20214.jpg', '12443G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/12443G.jpg', '12444G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/12444G.jpg', '12445G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/12445G.jpg', '12446G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/12446G.jpg', '12447G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/12447G.jpg', '12448G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/12448G.jpg', '12449 GSHA': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/12449%20001%20GHSA.jpg', '12449 202': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/12449%20202.jpg', '23166G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/23166G.jpg', '23167': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/23167.png', '23167G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/23167G.jpg', '23168G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/23168G.jpg', '23169G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/23169G.jpg', '23170G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/23170G.jpg', '23171G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/23171G.png', '23172G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/23172G.jpg', '23173G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/23173G.jpg', '23174G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/23174G.jpg', '32418G SIA': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/32418G%20SIA.jpg', '32419G EME': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/32419G%20EME.jpg', '32419RG PER': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/32419RG%20PER.jpg', '32419RG WHI': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/32419RG%20WHI.jpg', '32421G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/32421G.png', '32422G': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/32422G.png', '61241G GRE': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61241G%20GRE.jpg', '61282': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61282.jpg', '61283': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61283.jpg', '61284': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61284.jpg', '61285': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61285.jpg', '61285_1': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61285_1.jpg', '61286': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61286.jpg', '61287': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61287.jpg', '61288': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61288.jpg', '61289 BLA': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61289%20BLA.jpg', '61290 GRE': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61290%20GRE.jpg', '61290 PIN': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61290%20PIN.jpg', '61290 RED': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61290%20RED.jpg', '61290G TUR': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61290G%20TUR.jpg', '61290G VIO': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61290G%20VIO.jpg', '61290G YEL': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/61290G%20YEL.jpg', '62173G GRE': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62173G%20GRE.jpeg', '62255': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62255.jpg', '62256': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62256.jpg', '62257': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62257.png', '62258 BLA': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62258%20BLA.jpg', '62258 GRE': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62258%20GRE.jpg', '62258 PIN': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62258%20PIN.jpg', '62258 RED': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62258%20RED.jpg', '62258G TUR': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62258G%20TUR.jpg', '62258G VIO': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62258G%20VIO.jpg', '62258G YEL': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62258G%20YEL.jpg', '62259 GRE': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62259%20GRE.jpg', '62259 PIN': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62259%20PIN.jpg', '62259 RED': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62259%20RED.jpg', '62259G TUR': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62259G%20TUR.jpg', '62259G VIO': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62259G%20VIO.jpg', '62259G YEL': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/62259G%20YEL.jpg', '63342L': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63342L.png', '63342M': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63342M.png', '63342S': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63342S.png', '63342XL': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63342XL.png', '63343L': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63343L.jpg', '63343M': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63343M.jpg', '63343S': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63343S.jpg', '63343XL': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63343XL.jpg', '63344L': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63344L.png', '63344M': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63344M.png', '63344S': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63344S.png', '63344XL': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63344XL.png', '63345': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63345.jpg', '63345L': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63345L.jpg', '63345M': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63345M.jpg', '63345S': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63345S.jpg', '63345XL': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63345XL.jpg', '63546': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63546.png', '63547': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63547.png', '63548': 'https://storage.googleapis.com/flutterapp-fd5c3.appspot.com/NewImages/63548.png'}

def update_image_urls(images):

    # Iterate through the dictionary
    for dict_key, img_url in images.items():
        # Query documents by name
        docs = collection_ref.where("name", "==", dict_key).stream()

        for doc in docs:
            doc_ref = collection_ref.document(doc.id)
            # Update both image-url and image_url fields
            doc_ref.set({
                "image-url": img_url,
                "image_url": img_url
            }, merge=True)
            print(f"Updated {doc.id} with image URL {img_url}")

# Call the function
update_image_urls(images)